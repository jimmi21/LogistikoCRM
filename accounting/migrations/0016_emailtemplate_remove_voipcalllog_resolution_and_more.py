# Generated by Django 5.2.7 on 2025-11-02 15:44

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('accounting', '0015_voipcalllog_resolution'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='EmailTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='ÎŒÎ½Î¿Î¼Î± Î ÏÎ¿Ï„ÏÏ€Î¿Ï…')),
                ('description', models.TextField(blank=True, verbose_name='Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®')),
                ('subject', models.CharField(max_length=500, verbose_name='Î˜Î­Î¼Î± Email')),
                ('body_html', models.TextField(verbose_name='ÎšÎµÎ¯Î¼ÎµÎ½Î¿ (HTML)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True, verbose_name='Î•Î½ÎµÏÎ³ÏŒ')),
            ],
            options={
                'verbose_name': 'Î ÏÏŒÏ„Ï…Ï€Î¿ Email',
                'verbose_name_plural': 'Î ÏÏŒÏ„Ï…Ï€Î± Email',
                'ordering': ['name'],
            },
        ),
        migrations.RemoveField(
            model_name='voipcalllog',
            name='resolution',
        ),
        migrations.AddField(
            model_name='voipcall',
            name='resolution',
            field=models.CharField(blank=True, choices=[('pending', 'â³ Î•ÎºÏÎµÎ¼Î¼ÏŒÏ„Î·Ï„Î±'), ('closed', 'âœ… ÎšÎ»ÎµÎ¹ÏƒÏ„Î®'), ('follow_up', 'ğŸ“ Follow-up')], default='pending', max_length=20, verbose_name='Î•Ï…ÏƒÏ„Î¬Î¸ÎµÎ¹Î±'),
        ),
        migrations.AlterField(
            model_name='voipcall',
            name='call_id',
            field=models.CharField(max_length=50, unique=True, verbose_name='ID ÎšÎ»Î®ÏƒÎ·Ï‚'),
        ),
        migrations.AlterField(
            model_name='voipcall',
            name='client_email',
            field=models.EmailField(blank=True, max_length=254, null=True, verbose_name='Email Î ÎµÎ»Î¬Ï„Î·'),
        ),
        migrations.CreateModel(
            name='EmailAutomationRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='ÎŒÎ½Î¿Î¼Î± ÎšÎ±Î½ÏŒÎ½Î±')),
                ('description', models.TextField(blank=True, verbose_name='Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®')),
                ('trigger', models.CharField(choices=[('on_complete', 'ÎŒÏ„Î±Î½ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ½ÎµÏ„Î±Î¹ Ï…Ï€Î¿Ï‡ÏÎ­Ï‰ÏƒÎ·'), ('before_deadline', 'Î ÏÎ¹Î½ Ï„Î·Î½ Ï€ÏÎ¿Î¸ÎµÏƒÎ¼Î¯Î±'), ('on_overdue', 'ÎŒÏ„Î±Î½ ÎºÎ±Î¸Ï…ÏƒÏ„ÎµÏÎµÎ¯'), ('manual', 'Î§ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î±')], max_length=50, verbose_name='Trigger')),
                ('timing', models.CharField(choices=[('immediate', 'âš¡ Î†Î¼ÎµÏƒÎ±'), ('delay_1h', 'â° ÎœÎµÏ„Î¬ Î±Ï€ÏŒ 1 ÏÏÎ±'), ('delay_24h', 'ğŸ“… Î•Ï€ÏŒÎ¼ÎµÎ½Î· Î·Î¼Î­ÏÎ±'), ('scheduled', 'ğŸ• Î£Ï…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· ÏÏÎ±')], default='immediate', max_length=50, verbose_name='Î§ÏÎ¿Î½Î¿Î´Î¹Î¬Î³ÏÎ±Î¼Î¼Î±')),
                ('scheduled_time', models.TimeField(blank=True, help_text='Î“Î¹Î± timing "Î£Ï…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· ÏÏÎ±"', null=True, verbose_name='ÎÏÎ± Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚')),
                ('days_before_deadline', models.IntegerField(blank=True, null=True, verbose_name='Î—Î¼Î­ÏÎµÏ‚ Ï€ÏÎ¹Î½ Ï„Î·Î½ Ï€ÏÎ¿Î¸ÎµÏƒÎ¼Î¯Î±')),
                ('is_active', models.BooleanField(default=True, verbose_name='Î•Î½ÎµÏÎ³ÏŒÏ‚')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('filter_obligation_types', models.ManyToManyField(blank=True, help_text='Î‘Î½ Î¬Î´ÎµÎ¹Î¿, Î¹ÏƒÏ‡ÏÎµÎ¹ Î³Î¹Î± ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Ï„ÏÏ€Î¿Ï…Ï‚', to='accounting.obligationtype', verbose_name='Î¦Î¯Î»Ï„ÏÎ¿ Î¤ÏÏ€Ï‰Î½ Î¥Ï€Î¿Ï‡ÏÎ­Ï‰ÏƒÎ·Ï‚')),
                ('template', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='accounting.emailtemplate', verbose_name='Î ÏÏŒÏ„Ï…Ï€Î¿ Email')),
            ],
            options={
                'verbose_name': 'ÎšÎ±Î½ÏŒÎ½Î±Ï‚ Î‘Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚',
                'verbose_name_plural': 'ÎšÎ±Î½ÏŒÎ½ÎµÏ‚ Î‘Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ScheduledEmail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('recipient_email', models.EmailField(max_length=254, verbose_name='Email Î Î±ÏÎ±Î»Î®Ï€Ï„Î·')),
                ('recipient_name', models.CharField(max_length=200, verbose_name='ÎŒÎ½Î¿Î¼Î± Î Î±ÏÎ±Î»Î®Ï€Ï„Î·')),
                ('subject', models.CharField(max_length=500, verbose_name='Î˜Î­Î¼Î±')),
                ('body_html', models.TextField(verbose_name='ÎšÎµÎ¯Î¼ÎµÎ½Î¿')),
                ('send_at', models.DateTimeField(db_index=True, verbose_name='Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÏ„Î¹Ï‚')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Î£Ï„Î¬Î»Î¸Î·ÎºÎµ ÏƒÏ„Î¹Ï‚')),
                ('status', models.CharField(choices=[('pending', 'â³ Î•ÎºÎºÏÎµÎ¼ÎµÎ¯'), ('sent', 'âœ… Î£Ï„Î¬Î»Î¸Î·ÎºÎµ'), ('failed', 'âŒ Î‘Ï€Î­Ï„Ï…Ï‡Îµ'), ('cancelled', 'ğŸš« Î‘ÎºÏ…ÏÏÎ¸Î·ÎºÎµ')], default='pending', max_length=20, verbose_name='ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·')),
                ('error_message', models.TextField(blank=True, verbose_name='ÎœÎ®Î½Ï…Î¼Î± Î£Ï†Î¬Î»Î¼Î±Ï„Î¿Ï‚')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('automation_rule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='accounting.emailautomationrule', verbose_name='ÎšÎ±Î½ÏŒÎ½Î±Ï‚ Î‘Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='accounting.clientprofile', verbose_name='Î ÎµÎ»Î¬Ï„Î·Ï‚')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='scheduled_emails', to=settings.AUTH_USER_MODEL, verbose_name='Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Î±Ï€ÏŒ')),
                ('obligations', models.ManyToManyField(help_text='ÎŸÎ¹ Ï…Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Î±Ï†Î¿ÏÎ¬ Ï„Î¿ email', to='accounting.monthlyobligation', verbose_name='Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚')),
                ('template', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='accounting.emailtemplate', verbose_name='Î ÏÏŒÏ„Ï…Ï€Î¿')),
            ],
            options={
                'verbose_name': 'Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î¿ Email',
                'verbose_name_plural': 'Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î± Email',
                'ordering': ['send_at'],
            },
        ),
    ]
