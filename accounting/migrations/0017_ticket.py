# Generated by Django 5.2.7 on 2025-11-02 19:26

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('accounting', '0016_emailtemplate_remove_voipcalllog_resolution_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Ticket',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(help_text='Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÏƒÏ…Î¼Ï€Î»Î·ÏÏÎ½ÎµÏ„Î±Î¹', max_length=200, verbose_name='Î¤Î¯Ï„Î»Î¿Ï‚')),
                ('description', models.TextField(blank=True, help_text='Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î³Î¹Î± Ï„Î· ÎºÎ»Î®ÏƒÎ·', verbose_name='Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®')),
                ('status', models.CharField(choices=[('open', 'ğŸ”´ Î‘Î½Î¿Î¹Ï‡Ï„ÏŒ'), ('assigned', 'ğŸ‘¤ Î‘Î½Î±Ï„ÎµÎ¸ÎµÎ¹Î¼Î­Î½Î¿'), ('in_progress', 'â³ Î£Îµ ÎµÎ¾Î­Î»Î¹Î¾Î·'), ('resolved', 'âœ… Î•Ï€Î¹Î»Ï…Î¼Î­Î½Î¿'), ('closed', 'ğŸ”’ ÎšÎ»ÎµÎ¹ÏƒÏ„ÏŒ')], default='open', max_length=20, verbose_name='ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·')),
                ('priority', models.CharField(choices=[('low', 'ğŸŸ¢ Î§Î±Î¼Î·Î»Î®'), ('medium', 'ğŸŸ¡ ÎœÎ­ÏƒÎ·'), ('high', 'ğŸ”´ Î¥ÏˆÎ·Î»Î®'), ('urgent', 'ğŸš¨ Î•Ï€ÎµÎ¯Î³Î¿Ï…ÏƒÎ±')], default='high', max_length=20, verbose_name='Î ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±')),
                ('notes', models.TextField(blank=True, help_text='Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ­Ï‚ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚', verbose_name='Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ')),
                ('assigned_at', models.DateTimeField(blank=True, null=True, verbose_name='Î‘Î½Î±Ï„Î­Î¸Î·ÎºÎµ')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='Î•Ï€Î¹Î»ÏÎ¸Î·ÎºÎµ')),
                ('closed_at', models.DateTimeField(blank=True, null=True, verbose_name='ÎšÎ»ÎµÎ¹ÏƒÏ„ÏŒ')),
                ('email_sent', models.BooleanField(default=False, verbose_name='Email ÏƒÏ„Î¬Î»Î¸Î·ÎºÎµ')),
                ('follow_up_scheduled', models.BooleanField(default=False, verbose_name='Follow-up Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î¿')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_tickets', to=settings.AUTH_USER_MODEL, verbose_name='Î‘Î½Î±Ï„ÎµÎ¸ÎµÎ¹Î¼Î­Î½Î¿ ÏƒÎµ')),
                ('call', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='ticket', to='accounting.voipcall', verbose_name='ÎšÎ»Î®ÏƒÎ·')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='voip_tickets', to='accounting.clientprofile', verbose_name='Î ÎµÎ»Î¬Ï„Î·Ï‚')),
            ],
            options={
                'verbose_name': 'Ticket (Missed Call)',
                'verbose_name_plural': 'Tickets (Missed Calls)',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['status', '-created_at'], name='accounting__status_613787_idx'), models.Index(fields=['client', 'status'], name='accounting__client__f6d08b_idx'), models.Index(fields=['assigned_to', 'status'], name='accounting__assigne_ccd1ab_idx'), models.Index(fields=['-created_at'], name='accounting__created_e77078_idx')],
            },
        ),
    ]
