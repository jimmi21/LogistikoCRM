{% extends "admin/delete_confirmation.html" %}
{% load i18n admin_urls %}

{% block content %}
<p>{% blocktranslate with escaped_object=object %}Διαγραφή "{{ escaped_object }}"{% endblocktranslate %}</p>

{% if has_related_call %}
<div style="margin: 20px 0; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px;">
    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 14px;">
        <input type="checkbox" name="delete_call" value="1"
               style="width: 18px; height: 18px; cursor: pointer;">
        <span>Διαγραφή και της σχετικής κλήσης</span>
        <span style="color: #64748b; font-size: 12px;">({{ call_phone }})</span>
    </label>
</div>
{% endif %}

{% if perms_lacking %}
<p>{% trans "Deleting the selected object would result in deleting related objects, but your account doesn't have permission to delete the following types of objects:" %}</p>
<ul>
{% for obj in perms_lacking %}
    <li>{{ obj }}</li>
{% endfor %}
</ul>
{% elif protected %}
<p>{% trans "Deleting the selected object would require deleting the following protected related objects:" %}</p>
<ul>
{% for obj in protected %}
    <li>{{ obj }}</li>
{% endfor %}
</ul>
{% else %}
{% if deleted_objects|length == 1 and not has_related_call %}
<p>{% trans "Are you sure you want to delete this object?" %}</p>
{% endif %}

{% if deleted_objects|length > 1 %}
<p style="margin-top: 16px; color: #64748b; font-size: 13px;">
    {% trans "Related objects:" %}
</p>
<ul style="margin-left: 20px; color: #64748b; font-size: 13px;">
{% for deleted_object in deleted_objects %}
    <li>{{ deleted_object }}</li>
{% endfor %}
</ul>
{% endif %}

<form method="post">{% csrf_token %}
<input type="hidden" name="delete_call_flag" value="{{ has_related_call|yesno:'1,0' }}">
<div style="margin-top: 24px; display: flex; gap: 12px;">
    <a href="{{ object_url }}"
       style="padding: 8px 16px; background: #f1f5f9; color: #475569;
              border-radius: 6px; text-decoration: none; font-size: 14px;">
        {% trans "Cancel" %}
    </a>
    <button type="submit"
            style="padding: 8px 16px; background: #dc2626; color: white;
                   border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
        {% trans "Delete" %}
    </button>
</div>
</form>
{% endif %}
{% endblock %}
