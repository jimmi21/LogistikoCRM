{% extends "admin/index.html" %}
{% load static %}

{% block content %}
{{ block.super }}

<!-- âœ… ACCOUNTING DASHBOARD - Statistics & Quick Actions -->
<div class="module" id="accounting-dashboard" style="margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
    <h2 style="color: white; border-bottom: 2px solid rgba(255,255,255,0.3); padding-bottom: 10px;">
        ğŸ“Š Accounting Dashboard
    </h2>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
        <!-- Pending Obligations -->
        <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
            <div style="font-size: 2.5em; font-weight: bold;">{{ stats.pending_count|default:"0" }}</div>
            <div style="opacity: 0.9;">â³ Î•ÎºÎºÏÎµÎ¼ÎµÎ¯Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚</div>
            <a href="{% url 'admin:accounting_monthlyobligation_changelist' %}?status=pending"
               style="color: #fff; text-decoration: underline; font-size: 0.9em; margin-top: 10px; display: block;">
                Î ÏÎ¿Î²Î¿Î»Î® â†’
            </a>
        </div>

        <!-- Overdue -->
        <div style="background: rgba(239,68,68,0.25); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
            <div style="font-size: 2.5em; font-weight: bold;">{{ stats.overdue_count|default:"0" }}</div>
            <div style="opacity: 0.9;">ğŸ”´ ÎšÎ±Î¸Ï…ÏƒÏ„ÎµÏÎ·Î¼Î­Î½ÎµÏ‚</div>
            <a href="{% url 'admin:accounting_monthlyobligation_changelist' %}?status=overdue"
               style="color: #fff; text-decoration: underline; font-size: 0.9em; margin-top: 10px; display: block;">
                Î ÏÎ¿Î²Î¿Î»Î® â†’
            </a>
        </div>

        <!-- Completed This Month -->
        <div style="background: rgba(16,185,129,0.25); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
            <div style="font-size: 2.5em; font-weight: bold;">{{ stats.completed_this_month|default:"0" }}</div>
            <div style="opacity: 0.9;">âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½ÎµÏ‚ (Î¼Î®Î½Î±Ï‚)</div>
            <a href="{% url 'admin:accounting_monthlyobligation_changelist' %}?status=completed"
               style="color: #fff; text-decoration: underline; font-size: 0.9em; margin-top: 10px; display: block;">
                Î ÏÎ¿Î²Î¿Î»Î® â†’
            </a>
        </div>

        <!-- Total Revenue -->
        <div style="background: rgba(251,191,36,0.25); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
            <div style="font-size: 2.5em; font-weight: bold;">â‚¬{{ stats.total_revenue|default:"0" }}</div>
            <div style="opacity: 0.9;">ğŸ’° ÎˆÏƒÎ¿Î´Î± (Î¼Î®Î½Î±Ï‚)</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid rgba(255,255,255,0.3);">
        <h3 style="color: white; margin-bottom: 15px;">âš¡ Î“ÏÎ®Î³Î¿ÏÎµÏ‚ Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="{% url 'admin:accounting_monthlyobligation_add' %}"
               style="background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; backdrop-filter: blur(10px); transition: all 0.3s;">
                â• ÎÎ­Î± Î¥Ï€Î¿Ï‡ÏÎ­Ï‰ÏƒÎ·
            </a>
            <a href="{% url 'admin:accounting_clientprofile_add' %}"
               style="background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; backdrop-filter: blur(10px); transition: all 0.3s;">
                ğŸ‘¤ ÎÎ­Î¿Ï‚ Î ÎµÎ»Î¬Ï„Î·Ï‚
            </a>
            <a href="{% url 'admin:accounting_monthlyobligation_changelist' %}?status=pending&deadline__lte={{ today }}"
               style="background: rgba(239,68,68,0.3); color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; backdrop-filter: blur(10px); transition: all 0.3s;">
                ğŸš¨ Î›Î®Î¾Î· Î£Î®Î¼ÎµÏÎ±
            </a>
        </div>
    </div>
</div>

<style>
#accounting-dashboard a:hover {
    background: rgba(255,255,255,0.35) !important;
    transform: translateY(-2px);
}
</style>

<script>
// Auto-refresh dashboard every 5 minutes
setTimeout(() => {
    location.reload();
}, 5 * 60 * 1000);
</script>
{% endblock %}
